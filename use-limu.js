!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("limu")):"function"==typeof define&&define.amd?define(["exports","react","limu"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["use-limu"]={},e.React,e.limu)}(this,function(e,t,u){"use strict";var n,i=(n=t)&&"object"==typeof n&&"default"in n?n:{default:n};function a(e){let t,n=e=>"object"==(t=typeof e)?{}.toString.call(e).slice(8,-1).toLowerCase():t;return{type:n(e),name:(e=e,"function"===(t=n(e))?e.name:"undefined"===t?void 0:e.constructor.name)}}function l(e=null){const[t,n]=i.default.useState(()=>u.produce("function"===a(e).type?e():e,()=>{}));return[t,i.default.useCallback(e=>{"function"===a(e).type?n(u.produce(t,e)):n(u.produce(e,()=>{}))},[t])]}e.getType=a,e.useLimu=l,e.useLimuArray=function(e=[],t={}){const{idName:o=null}=t,[c,r]=l(()=>"array"===a(e).type||"function"===a(e).type?e:[]);return i.default.useEffect(()=>{"array"===!a(e)&&"function"===!a(e).type&&console.error("useLimuArray initState not is Array or Function:array")},[]),{state:c,setState:r,add:i.default.useCallback((t,n,...u)=>{r(e=>{e.splice("number"===a(t).type?t:c.length,"number"===a(n).type?n:0,...u)})},[c]),remove:i.default.useCallback((n,u=1)=>{r(e=>{switch(a(n).type){case"number":e.splice(n,u);break;case"string":var t;o?(t=e.findIndex(e=>e[o]===n),e.splice(t,u)):console.error("useLimuArray options.idName 未定义")}})},[c]),change:i.default.useCallback((n=null,u=null)=>{if(n||0===n)switch(a(n).type){case"string":o&&r(e=>{var t=e.findIndex(e=>"object"===a(e)&&e[o]&&e[o]==n);!t&&0!==t||("object"===a(u).type?0<=t&&(e[t]={...e[t],...u||{}}):0<=t&&(e[t]=u))});break;case"number":r(e=>{"object"===a(e[n]).type&&"object"===a(u).type?e[n]={...e[n],...u}:e[n]=u})}},[c])}},e.useLimuObject=function(e=null){const[t,c]=l(()=>"object"===a(e).type||"function"===a(e).type?e:{});return i.default.useEffect(()=>{"object"===!a(e).type&&"function"===!a(e).type&&console.error("useLimuObject initState not is Object or Function:object")},[]),{state:t,setState:c,change:i.default.useCallback((t,o)=>{if(t&&"string"===a(t).type){let n=t.split("."),u=n.length;c(2<=u?e=>{let t=e[n[0]];for(let e=1;e<u-1;e++)t=t[n[e]];t[n[u-1]]=o}:e=>{e[t]=o})}},[])}},e.useLimuReducer=function(u,e=null){const[t,o]=l(e);return[t,i.default.useCallback((t,n)=>{o(e=>u(e,t,n))},[t])]},Object.defineProperty(e,"__esModule",{value:!0})});
