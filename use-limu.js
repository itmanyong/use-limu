!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("limu")):"function"==typeof define&&define.amd?define(["exports","react","limu"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["use-limu"]={},e.React,e.limu)}(this,function(e,t,c){"use strict";var o,r=(o=t)&&"object"==typeof o&&"default"in o?o:{default:o};function i(e=null){const[t,o]=r.default.useState(()=>c.produce("function"==typeof e?e():e,()=>{}));return[t,r.default.useCallback(e=>{o("function"==typeof e?c.produce(t,e):c.produce(e,()=>{}))},[t])]}e.useLimu=i,e.useLimuArray=function(e=[],t={}){const{idName:n=null}=t,[u,l]=i(()=>Array.isArray(e)||"function"==typeof e?e:[]);return r.default.useEffect(()=>{Array.isArray(e)},[]),{state:u,setState:l,add:r.default.useCallback((t,o,...c)=>{console.log(t,o,c),l(e=>{e.splice("number"==typeof t?t:u.length,"number"==typeof o?o:0,...c)})},[u]),remove:r.default.useCallback((o,c=1)=>{l(e=>{switch(typeof o){case"number":e.splice(o,c);break;case"string":var t;n?(t=e.findIndex(e=>e[n]===o),e.splice(t,c)):console.error("useLimuArray options.idName 未定义")}})},[u]),change:r.default.useCallback((o=null,c=null)=>{if(o||0===o)switch(typeof o){case"string":n&&l(e=>{var t=e.findIndex(e=>"[object Object]"===Object.prototype.toString.call(e)&&e[n]&&e[n]==o);!t&&0!==t||("[object Object]"===Object.prototype.toString.call(c)?0<=t&&(e[t]={...e[t],...c||{}}):0<=t&&(e[t]=c))});break;case"number":l(e=>{"[object Object]"===Object.prototype.toString.call(e[o])&&"[object Object]"===Object.prototype.toString.call(c)?e[o]={...e[o],...c}:e[o]=c})}},[u])}},e.useLimuObject=function(e=null){const[t,u]=i(()=>"[object Object]"===Object.prototype.toString.call(e)||"function"==typeof e?e:{});return r.default.useEffect(()=>{"[object Object]"===!Object.prototype.toString.call(e)&&"function"!=typeof e&&console.error("useLimuObject initState not is Object or Function:object")},[]),{state:t,setState:u,change:r.default.useCallback((t,n)=>{if(t&&"string"==typeof t){let o=t.split("."),c=o.length;u(2<=c?e=>{let t=e[o[0]];for(let e=1;e<c-1;e++)t=t[o[e]];t[o[c-1]]=n}:e=>{e[t]=n})}},[t])}},e.useLimuReducer=function(c,e=null){const[t,n]=i(e);return[t,r.default.useCallback((t,o)=>{n(e=>c(e,t,o))},[t])]},Object.defineProperty(e,"__esModule",{value:!0})});
